<%--
  Created by IntelliJ IDEA.
  User: 邓文校
  Date: 2020/5/5
  Time: 13:39
  To change this template use File | Settings | File Templates.
--%>
<%@ page contentType="text/html"%>
<%@page pageEncoding="GB2312"%>
<%@page import="java.sql.*" %>  <%--导入java.sql包--%>
<html>
<head>
    <!-- 指定字符集 -->
    <meta charset="utf-8">
    <!-- 使用Edge最新的浏览器的渲染方式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- viewport视口：网页可以根据设置的宽度自动进行适配，在浏览器的内部虚拟一个容器，容器的宽度与设备的宽度相同。
    width: 默认宽度与设备的宽度相同
    initial-scale: 初始的缩放比，为1:1 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>查询界面</title>

    <!-- 1. 导入CSS的全局样式 -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- 2. jQuery导入，建议使用1.9以上的版本 -->
    <script src="js/jquery-2.1.0.min.js"></script>
    <!-- 3. 导入bootstrap的js文件 -->
    <script src="js/bootstrap.min.js"></script>
    <style>
        .p1{
            margin: 0 auto;
            width: fit-content;
            height: 20px;
            font-size: 18px;
            color: darkblue;
        }
    </style>

<%--    <script>--%>
<%--        $(function () {--%>
<%--            $.get("send",function (data) {--%>
<%--                alert(data);--%>
<%--            });--%>
<%--        });--%>
<%--    </script>--%>


</head>
<body>

<input type="button" id="btn" value="获取数据">
<table>
    <tbody id="data-list">
        <tr>
            <td>aa</td>
            <td>bb</td>
            <td>vv</td>
        </tr>
    </tbody>

</table>
<script src="${pageContext.request.contextPath}/send"></script>

<script>
    $(function () {
        $("#btn").click(function () {

            $.post("/send",{
                    name:"程哥",
                    url:"http://www.cheng1996.cn"
                },
                function(data){
                    alert("数据: \n" + data);
                    var jsonArray = JSON.parse(data);
                    console.log(jsonArray);
                    for(var i=0;i<jsonArray.length;i++)
                    {
                        console.log(jsonArray[0].name);
                        console.log(jsonArray[0].url);
                    }
        })
    })
</script>
<%--<div class="p1" >--%>
<%--    <h2 style="color: #761c19">当前设备的状态及信息</h2>--%>
<%--    <div class="p2">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>
<%--                if(conn != null){--%>
<%--                    out.print("<br />");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_value FROM information where s_name='"+userName+"' and j_name='空调温度';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("空调当前温度：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_value") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div articlec>--%>
<%--    <div class="p2">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>

<%--                if(conn != null){--%>
<%--                    out.print(" ");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_state FROM information where s_name='"+userName+"' and j_name='模式';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("空调模式为：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_state") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div>--%>
<%--    <div class="p2">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>
<%--                if(conn != null){--%>
<%--                    out.print(" ");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_state FROM information where s_name='"+userName+"' and j_name='风速';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("空调风速为：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_state") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div>--%>
<%--    <hr style=" height: 1px;border:none;border-top:2px solid darkgreen;width:300px" />--%>
<%--    <div class="p2">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>

<%--                if(conn != null){--%>
<%--                    out.print(" ");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_value FROM information where s_name='"+userName+"' and j_name='温度';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("温度指数为：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_value") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div>--%>
<%--    <div class="p2">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>

<%--                if(conn != null){--%>
<%--                    out.print(" ");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_value FROM information where s_name='"+userName+"' and j_name='湿度';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("湿度指数为：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_value") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div>--%>
<%--    <hr style=" height:1px;border:none;border-top:2px solid darkgreen;width:300px" />--%>
<%--    <div class="p3">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>

<%--                if(conn != null){--%>
<%--                    out.print(" ");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_state FROM information where s_name='"+userName+"' and j_name='门窗磁';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("门窗磁状态为：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_state") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div>--%>
<%--    <hr style=" height:1px;border:none;border-top:2px solid darkgreen;width:300px" />--%>
<%--    <div class="p3">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>

<%--                if(conn != null){--%>
<%--                    out.print(" ");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_state FROM information where s_name='"+userName+"' and j_name='灯光1';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("灯光1的状态为：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_state") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div>--%>
<%--    <div class="p3">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>

<%--                if(conn != null){--%>
<%--                    out.print(" ");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_state FROM information where s_name='"+userName+"' and j_name='灯光2';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("灯光2的状态为：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_state") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div>--%>
<%--    <div class="p3">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>

<%--                if(conn != null){--%>
<%--                    out.print(" ");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_value FROM information where s_name='"+userName+"' and j_name='灯光3';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("灯光3：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_value") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div>--%>
<%--    <div class="p3">--%>
<%--        <%--%>
<%--            try {--%>
<%--                Class.forName("com.mysql.cj.jdbc.Driver");  ////驱动程序名--%>
<%--                String url = "jdbc:mysql://localhost:3306/day17?serverTimezone=GMT%2B8&useSSL=false"; //数据库名--%>
<%--                String username = "root";  //数据库用户名--%>
<%--                String password = "123456";  //数据库用户密码--%>
<%--                Connection conn = DriverManager.getConnection(url, username, password);  //连接状态--%>

<%--                if(conn != null){--%>
<%--                    out.print(" ");--%>
<%--        %>--%>
<%--        <%--%>
<%--            Statement stmt = null;--%>
<%--            ResultSet rs = null;--%>
<%--            String userName=request.getParameter("userName");--%>
<%--            String sql = "SELECT s_value FROM information where s_name='"+userName+"' and j_name='灯光4';";--%>
<%--            stmt = conn.createStatement();--%>
<%--            rs = stmt.executeQuery(sql);--%>
<%--            out.print("灯光4：");--%>
<%--            /*out.print("<br/>");*/--%>
<%--            while (rs.next()) {%>--%>
<%--        <tr>--%>
<%--            <td width="30" ><%=rs.getString("s_value") %></td>--%>
<%--        </tr>--%>
<%--        <%--%>
<%--                    }--%>
<%--                }else{--%>
<%--                    out.print("连接失败！");--%>
<%--                }--%>
<%--            }catch (Exception e) {--%>
<%--                //e.printStackTrace();--%>
<%--                out.print("数据库连接异常！");--%>
<%--            }--%>
<%--        %>--%>
<%--    </div><br/>--%>
<%--    <button onclick="window.location.href='interface.jsp';">--%>
<%--        &lt;%&ndash;<jsp:forward page="interface.jsp"></jsp:forward>&ndash;%&gt;--%>
<%--        <a style="color: #761c19">--%>
<%--            查询实时状态信息--%>
<%--        </a>--%>
<%--    </button>--%>
<%--</div>--%>
</body>
</html>